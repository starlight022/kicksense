<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KickSense</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Knewave&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css">

  <!-- 3D rendering library -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>

<body>
  <main class="app-shell">

    <header class="app-header">
      <div class="status-bar"></div>
      <h1>KickSense</h1>
      <p class="subtitle">Treff og m√•l!</p>
      <div class="separator"></div>
    </header>

    <section class="visualizer" aria-labelledby="visualizer-title">

  <!-- Connection status -->
      <button id="connStatus" class="conn-btn conn-off" aria-label="KickSense connection">
  <span class="conn-icon">üîå</span>
  <span class="conn-text">Ingen tilkobling</span>
  <span class="conn-ring"></span>
</button>

      <!-- Dev button -->
   <button id="devToggle" type="button" class="dev-fab" aria-label="Developer menu">
        ‚öôÔ∏è
      </button>

      <div id="devPanel" class="dev-panel is-hidden">

  <!-- Connect Arduino -->
  <button id="btnSerial" class="btn">Connect Arduino</button>

  <!-- Start / Manual toggle -->
  <div class="section-header">
    <div class="control-group">
      <button id="toggle-start" type="button">Start</button>
      <button id="toggle-manual" type="button" class="secondary-btn">Manual</button>
    </div>
  </div>

  <!-- Manual input -->
  <div class="manual-input is-hidden">
    <input id="raw-toe" type="number" min="0" max="800" value="0" placeholder="toe raw">
    <input id="raw-inside" type="number" min="0" max="800" value="0" placeholder="inside raw">
    <input id="raw-laces" type="number" min="0" max="800" value="0" placeholder="laces raw">
    <input id="raw-vrist2" type="number" min="0" max="800" value="0" placeholder="vrist 2 raw">
    <input id="raw-innside2" type="number" min="0" max="800" value="0" placeholder="innside 2 raw">
    <input id="raw-bridge" type="number" min="0" max="800" value="0" placeholder="bridge raw">
    <button id="send-manual" type="button">Send</button>
  </div>

</div>

  <!-- Change shoe -->
<button id="toggle-model" type="button" class="secondary-btn">Change Shoe</button>
      <!-- Background Change Button -->
<button id="themeBtn" type="button" class="theme-fab" aria-label="Bytte bakgrunn">
  üé®
</button>


      <!-- SHOWCASE WRAPPER -->
      <div id="showcase-views-wrapper">

        <!-- VIEW 1 -->
        <div id="showcase-1" class="showcase-view is-active">

          <div class="shoe-wrapper">
            <div id="shoe-3d-container-1" class="shoe-3d-container">
              <model-viewer
                src="model1.glb"
                alt="3D-modell av fotballsko - Vinkel 1"
                camera-orbit="70deg 90deg 1.5m"
                ar
                loading="lazy"
                id="model-viewer-1"
                style="width: 100%; height: 100%;">
              </model-viewer>
              <div class="shoe-overlay" id="shoe-overlay-1"></div>
            </div>
          </div>

          <div class="impact-bars" aria-label="Impact strength">
            <div class="impact-bar">
              <span class="impact-label">T√•</span>
              <div class="impact-track"><div class="impact-fill" id="bar-toe-1"></div></div>
              <span class="impact-pct" id="bar-toe-pct-1">0%</span>
            </div>
            <div class="impact-bar">
              <span class="impact-label">Innside</span>
              <div class="impact-track"><div class="impact-fill" id="bar-inside-1"></div></div>
              <span class="impact-pct" id="bar-inside-pct-1">0%</span>
            </div>
            <div class="impact-bar">
              <span class="impact-label">Innside 2</span>
              <div class="impact-track"><div class="impact-fill" id="bar-innside2-1"></div></div>
              <span class="impact-pct" id="bar-innside2-pct-1">0%</span>
            </div>
            <div class="impact-bar">
              <span class="impact-label">Vrist</span>
              <div class="impact-track"><div class="impact-fill" id="bar-laces-1"></div></div>
              <span class="impact-pct" id="bar-laces-pct-1">0%</span>
            </div>
            <div class="impact-bar">
              <span class="impact-label">Vrist 2</span>
              <div class="impact-track"><div class="impact-fill" id="bar-vrist2-1"></div></div>
              <span class="impact-pct" id="bar-vrist2-pct-1">0%</span>
            </div>
            <div class="impact-bar">
              <span class="impact-label">Midtfot</span>
              <div class="impact-track"><div class="impact-fill" id="bar-bridge-1"></div></div>
              <span class="impact-pct" id="bar-bridge-pct-1">0%</span>
            </div>
          </div>

          <div class="view-selector-panel">
            <button class="view-selector-btn is-active" data-view="1">1</button>
            <button class="view-selector-btn" data-view="2">2</button>
            <button class="view-selector-btn" data-view="3">3</button>
          </div>
        </div>

        <!-- VIEW 2 -->
        <div id="showcase-2" class="showcase-view">

          <div class="shoe-wrapper">
            <div id="shoe-3d-container-2" class="shoe-3d-container">
              <model-viewer
                src="model1.glb"
                alt="3D-modell av fotballsko - Vinkel 2"
                camera-orbit="30deg 75deg 1.5m"
                ar
                loading="lazy"
                id="model-viewer-2"
                style="width: 100%; height: 100%;">
              </model-viewer>
              <div class="shoe-overlay" id="shoe-overlay-2"></div>
            </div>
          </div>

          <div class="impact-bars" aria-label="Impact strength">
            <div class="impact-bar">
              <span class="impact-label">T√•</span>
              <div class="impact-track"><div class="impact-fill" id="bar-toe-2"></div></div>
              <span class="impact-pct" id="bar-toe-pct-2">0%</span>
            </div>
            <div class="impact-bar">
              <span class="impact-label">Innside</span>
              <div class="impact-track"><div class="impact-fill" id="bar-inside-2"></div></div>
              <span class="impact-pct" id="bar-inside-pct-2">0%</span>
            </div>
            <div class="impact-bar">
              <span class="impact-label">Innside 2</span>
              <div class="impact-track"><div class="impact-fill" id="bar-innside2-2"></div></div>
              <span class="impact-pct" id="bar-innside2-pct-2">0%</span>
            </div>
            <div class="impact-bar">
              <span class="impact-label">Vrist</span>
              <div class="impact-track"><div class="impact-fill" id="bar-laces-2"></div></div>
              <span class="impact-pct" id="bar-laces-pct-2">0%</span>
            </div>
            <div class="impact-bar">
              <span class="impact-label">Vrist 2</span>
              <div class="impact-track"><div class="impact-fill" id="bar-vrist2-2"></div></div>
              <span class="impact-pct" id="bar-vrist2-pct-2">0%</span>
            </div>
            <div class="impact-bar">
              <span class="impact-label">Midtfot</span>
              <div class="impact-track"><div class="impact-fill" id="bar-bridge-2"></div></div>
              <span class="impact-pct" id="bar-bridge-pct-2">0%</span>
            </div>
          </div>

          <div class="view-selector-panel">
            <button class="view-selector-btn" data-view="1">1</button>
            <button class="view-selector-btn" data-view="2">2</button>
            <button class="view-selector-btn" data-view="3">3</button>
          </div>
        </div>

        <!-- VIEW 3 -->
        <div id="showcase-3" class="showcase-view">

          <div class="shoe-wrapper">
            <div id="shoe-3d-container-3" class="shoe-3d-container">
              <model-viewer
                src="model1.glb"
                alt="3D-modell av fotballsko - Vinkel 3"
                camera-orbit="300deg 75deg 1.5m"
                field-of-view="130deg"
                camera-target="0m -1m 0m"
                ar
                loading="lazy"
                id="model-viewer-3"
                style="width: 100%; height: 100%;">
              </model-viewer>
              <div class="shoe-overlay" id="shoe-overlay-3"></div>
            </div>
          </div>

          <div class="impact-bars" aria-label="Impact strength">
            <div class="impact-bar">
              <span class="impact-label">T√•</span>
              <div class="impact-track"><div class="impact-fill" id="bar-toe-3"></div></div>
              <span class="impact-pct" id="bar-toe-pct-3">0%</span>
            </div>
            <div class="impact-bar">
              <span class="impact-label">Innside</span>
              <div class="impact-track"><div class="impact-fill" id="bar-inside-3"></div></div>
              <span class="impact-pct" id="bar-inside-pct-3">0%</span>
            </div>
            <div class="impact-bar">
              <span class="impact-label">Innside 2</span>
              <div class="impact-track"><div class="impact-fill" id="bar-innside2-3"></div></div>
              <span class="impact-pct" id="bar-innside2-pct-3">0%</span>
            </div>
            <div class="impact-bar">
              <span class="impact-label">Vrist</span>
              <div class="impact-track"><div class="impact-fill" id="bar-laces-3"></div></div>
              <span class="impact-pct" id="bar-laces-pct-3">0%</span>
            </div>
            <div class="impact-bar">
              <span class="impact-label">Vrist 2</span>
              <div class="impact-track"><div class="impact-fill" id="bar-vrist2-3"></div></div>
              <span class="impact-pct" id="bar-vrist2-pct-3">0%</span>
            </div>
            <div class="impact-bar">
              <span class="impact-label">Midtfot</span>
              <div class="impact-track"><div class="impact-fill" id="bar-bridge-3"></div></div>
              <span class="impact-pct" id="bar-bridge-pct-3">0%</span>
            </div>
          </div>

          <div class="view-selector-panel">
            <button class="view-selector-btn" data-view="1">1</button>
            <button class="view-selector-btn" data-view="2">2</button>
            <button class="view-selector-btn" data-view="3">3</button>
          </div>
        </div>

      </div><!-- /#showcase-views-wrapper -->

    </section>

    <!-- FEEDBACK -->
    <section class="feedback" aria-label="Feedback">
      <div class="feedback-card">
        <div class="feedback-title">Hva syns du om appen?</div>

        <div class="stars" id="feedback-stars" role="radiogroup" aria-label="Vurdering 1 til 5">
          <button type="button" class="star" data-value="1" aria-label="1 stjerne">‚òÖ</button>
          <button type="button" class="star" data-value="2" aria-label="2 stjerner">‚òÖ</button>
          <button type="button" class="star" data-value="3" aria-label="3 stjerner">‚òÖ</button>
          <button type="button" class="star" data-value="4" aria-label="4 stjerner">‚òÖ</button>
          <button type="button" class="star" data-value="5" aria-label="5 stjerner">‚òÖ</button>
        </div>

        <div class="feedback-msg" id="feedback-msg" aria-live="polite"></div>
      </div>
    </section>

    <!-- Confetti canvas (on top of UI, pointer-events disabled) -->
    <canvas id="confetti-canvas" aria-hidden="true"></canvas>

  </main>

  <script type="module" src="script.js"></script>

  <!-- THEME POPUP -->
  <div id="themeModal" class="theme-modal hidden">
    <div class="theme-box">
      <h3>Velg bakgrunn</h3>

      <div class="theme-options">
        <button class="theme-option" data-theme="dark">Svart</button>
        <button class="theme-option" data-theme="light">Hvitt</button>
        <button class="theme-option" data-theme="gray">Gr√•</button>
      </div>

      <button id="closeThemeModal" class="close-btn">‚ùå</button>
    </div>
  </div>

</body>
</html>
